<main class="busca" data-controller="busca">
  <div class="container">
    <!--
        Topo
    -->
    <div class="row">
      <div class="col-sm-12 col-lg-6">
        <h3 class="textBigTitle">Resultado da busca</h3>
      </div>
    </div>
    
    <!--
        Campo da busca
    -->
    <div class="row">
      <div class="col-sm-12">
        <form action="/busca" class="formBusca" method="get">
          <input type="text" name="search_api_fulltext" placeholder="O que você está buscando?" value="{{textSearch}}">
          <button class="icon-search"></button>
        </form>
      </div>
    </div>
    
    <div class="targetMain">
      
      {% if(textSearch) %}
      <!-- 
          Número de resultados
      -->
      <div class="row">
        <div class="col-sm-12">
          <p class="nResultados"><strong>{{ searchPagination.totalItems ? searchPagination.totalItems : '0' }}</strong> resultados para <strong>"{{textSearch}}"</strong></p>
          <button class="btnFilterMobile"><i class="icon-filter"></i>Filtro</button>
        </div>
      </div>
      {% endif %}
      
      
      {% if(searchResults) %}
      <!-- 
          Resultados da busca
      -->
      <div class="row posts" data-url="{{ paginationUrl }}">
        <div class="col-sm-12 col-md-12 col-lg-8 filterBlock">
          <div class="ordenacao">
            <form class="formOrdenacao">
              <label for="ordenacao">Ordenar por:</label>
              <select id="ordenacao">
                <option value="search_api_relevance|ASC">Em qualquer data</option>
                <option value="created|DESC">Os mais recentes primeiro</option>
                <option value="created|ASC">Os mais antigos primeiro</option>
              </select>
              <input class="sort_by" type="hidden" name="sort_by" value="search_api_relevance">
              <input class="sort_order" type="hidden" name="sort_order" value="ASC">
            </form>
          </div>
          <div class="resultados target">
            {% for result in searchResults %}
            <div class="item">
              <a class="textTitle" href="{{result.url}}">{{result.title}}</a>
              <a class="textCat" href="{{ result.secaoUrl }}"> {{ result.secaoLabel }}</a>
              <p class="text14">Publicado em {{ result.created }}</p>
              <p class="text18">{{ result.excerpt|raw }}</p>
            </div>
            {% endfor %}
            
          </div>
          <div class="loadMore">
             {% set totalPages = searchPagination.totalPages - 1 %}
            {% if totalPages > 0 %}
              <a href="javascript:void(0);" data-atual="0" data-total="{{ totalPages }}" class="btnAzul">Carregar mais</a>
            {% endif %}
          </div>
        </div>
        <div class="col-sm-12 col-lg-3 offset-lg-1 lateral">
          <p class="text20">FILTRO<i class="icon-close"></i></p>
          <form class="filtrosBusca">
            <div class="filtro">
              <div class="form-row header">
                <div class="col">
                    <p>Seções</p>
                </div>
              </div>
              <div class="form-row">
                <div class="col">
                  {% for cat in filterCategoria if cat|length %}
                  <div class="form-check">
                    <input type="checkbox" {{cat.checked}} id="secaoAquario{{cat.value}}" class="form-check-input secao" name="{{cat.name}}[]" value="{{cat.value}}">
                    <label for="secaoAquario{{cat.value}}">{{cat.label}}</label>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
            <div class="form-row btnAplicar">
              <div class="col">
                <button class="btnCinza" type="submit">Aplicar filtro</button> 
              </div>
            </div>
          </form>
        </div>
      </div>
      {% endif%}
    </div>
    
  </div>
</main>


